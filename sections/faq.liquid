<section class="custom-section {{ section.settings.color_scheme }}{% if section.settings.enable_full_width %} full-width{% else %} page-width{% endif %}">
  <div class="faq-container">
    <!-- FAQ Navigation Menu -->
    <div class="faq-menu">
      <h2>{{ section.settings.faq_title }}</h2>
      <ul>
        {% if section.settings.category_title_1 != blank %}
          <li>
            <label class="faq-category-label">
              <span>{{ section.settings.category_title_1 }}</span>
              <input
                type="radio"
                name="faq-category"
                class="faq-category-radio"
                onclick="scrollToElement('category_1', 100)">
            </label>
          </li>
        {% endif %}
        {% if section.settings.category_title_2 != blank %}
          <li>
            <label class="faq-category-label">
              <span>{{ section.settings.category_title_2 }}</span>
              <input
                type="radio"
                name="faq-category"
                class="faq-category-radio"
                onclick="scrollToElement('category_2', 100)">
            </label>
          </li>
        {% endif %}
        {% if section.settings.category_title_3 != blank %}
          <li>
            <label class="faq-category-label">
              <span>{{ section.settings.category_title_3 }}</span>
              <input
                type="radio"
                name="faq-category"
                class="faq-category-radio"
                onclick="scrollToElement('category_3', 100)">
            </label>
          </li>
        {% endif %}
        {% if section.settings.category_title_4 != blank %}
          <li>
            <label class="faq-category-label">
              <span>{{ section.settings.category_title_4 }}</span>
              <input
                type="radio"
                name="faq-category"
                class="faq-category-radio"
                onclick="scrollToElement('category_4', 100)">
            </label>
          </li>
        {% endif %}
        {% if section.settings.category_title_5 != blank %}
          <li>
            <label class="faq-category-label">
              <span>{{ section.settings.category_title_5 }}</span>
              <input
                type="radio"
                name="faq-category"
                class="faq-category-radio"
                onclick="scrollToElement('category_5', 100)">
            </label>
          </li>
        {% endif %}
      </ul>
    </div>

    <!-- FAQ Content Area with Category Titles and Questions -->
    <div class="faq-content">
        <h2 class="mobile-faq-title">{{ section.settings.faq_title }}</h2>
      {% if section.settings.custom_message != blank %}
        <div class="custom-message">
          <p>{{ section.settings.custom_message }}</p>
        </div>
      {% endif %}
      <!-- Category 1 -->
      {% if section.settings.category_title_1 != blank %}
        <div class="faq-topic">
          <h3 id="category_1">{{ section.settings.category_title_1 }}</h3>
          {% for block in section.blocks %}
            {% if block.settings.category_association == "category_1" %}
              <div class="faq-item">
                <button class="faq-question">• {{ block.settings.question_title }}</button>
                <div class="faq-answer">
                  {% if block.settings.question_image != blank %}
                    <img
                      src="{{ block.settings.question_image | image_url: width: 500 }}"
                      alt="{{ block.settings.question_title }}"
                      style="max-width:100%; margin-bottom: 10px;" />
                  {% endif %}
                  <p>{{ block.settings.answer }}</p>
                </div>
              </div>
            {% endif %}
          {% endfor %}
        </div>
      {% endif %}

      <!-- Category 2 -->
      {% if section.settings.category_title_2 != blank %}
        <div class="faq-topic">
          <h3 id="category_2">{{ section.settings.category_title_2 }}</h3>
          {% for block in section.blocks %}
            {% if block.settings.category_association == "category_2" %}
              <div class="faq-item">
                <button class="faq-question">• {{ block.settings.question_title }}</button>
                <div class="faq-answer">
                  {% if block.settings.question_image != blank %}
                    <img
                      src="{{ block.settings.question_image | image_url: width: 500 }}"
                      alt="{{ block.settings.question_title }}"
                      style="max-width:100%; margin-bottom: 10px;" />
                  {% endif %}
                  <p>{{ block.settings.answer }}</p>
                </div>
              </div>
            {% endif %}
          {% endfor %}
        </div>
      {% endif %}

      <!-- Repeat for other categories -->
      {% if section.settings.category_title_3 != blank %}
        <div class="faq-topic">
          <h3 id="category_3">{{ section.settings.category_title_3 }}</h3>
          {% for block in section.blocks %}
            {% if block.settings.category_association == "category_3" %}
              <div class="faq-item">
                <button class="faq-question">• {{ block.settings.question_title }}</button>
                <div class="faq-answer">
                  {% if block.settings.question_image != blank %}
                    <img
                      src="{{ block.settings.question_image | image_url: width: 500 }}"
                      alt="{{ block.settings.question_title }}"
                      style="max-width:100%; margin-bottom: 10px;" />
                  {% endif %}
                  <p>{{ block.settings.answer }}</p>
                </div>
              </div>
            {% endif %}
          {% endfor %}
        </div>
      {% endif %}

      {% if section.settings.category_title_4 != blank %}
        <div class="faq-topic">
          <h3 id="category_4">{{ section.settings.category_title_4 }}</h3>
          {% for block in section.blocks %}
            {% if block.settings.category_association == "category_4" %}
              <div class="faq-item">
                <button class="faq-question">• {{ block.settings.question_title }}</button>
                <div class="faq-answer">
                  {% if block.settings.question_image != blank %}
                    <img
                      src="{{ block.settings.question_image | image_url: width: 500 }}"
                      alt="{{ block.settings.question_title }}"
                      style="max-width:100%; margin-bottom: 10px;" />
                  {% endif %}
                  <p>{{ block.settings.answer }}</p>
                </div>
              </div>
            {% endif %}
          {% endfor %}
        </div>
      {% endif %}

      {% if section.settings.category_title_5 != blank %}
        <div class="faq-topic">
          <h3 id="category_5">{{ section.settings.category_title_5 }}</h3>
          {% for block in section.blocks %}
            {% if block.settings.category_association == "category_5" %}
              <div class="faq-item">
                <button class="faq-question">• {{ block.settings.question_title }}</button>
                <div class="faq-answer">
                  {% if block.settings.question_image != blank %}
                    <img
                      src="{{ block.settings.question_image | image_url: width: 500 }}"
                      alt="{{ block.settings.question_title }}"
                      style="max-width:100%; margin-bottom: 10px;" />
                  {% endif %}
                  <p>{{ block.settings.answer }}</p>
                </div>
              </div>
            {% endif %}
          {% endfor %}
        </div>
      {% endif %}
    </div>
  </div>
</section>

<script>
    function scrollToElement(id, offset) {
      const element = document.getElementById(id);
      const elementPosition = element.getBoundingClientRect().top + window.scrollY;
      const offsetPosition = elementPosition - offset;
  
      window.scrollTo({
        top: offsetPosition,
        behavior: 'smooth'
      });
    }
  
    document.querySelectorAll('.faq-question').forEach(button => {
      button.addEventListener('click', () => {
        const answer = button.nextElementSibling;
        const isVisible = answer.style.display === 'block';
  
        // Close all answers first
        document.querySelectorAll('.faq-answer').forEach(a => a.style.display = 'none');
  
        // Toggle the selected one
        answer.style.display = isVisible ? 'none' : 'block';
      });
    });
</script>


<style>
  .faq-container {
    display: flex;
    margin: 50px auto;
    justify-content: space-evenly;
  }
  .faq-topic {
    border-top: 1px solid black;
  }
  .faq-menu {
    width: 40%;
    padding-right: 20px;
  }
  .faq-menu ul {
    color: black;
    list-style: none;
    padding: 0;
    margin-top: 0;
  }
  .faq-menu ul li {
    padding: 20px 0;
    border-bottom: 1px solid black;
  }

  .faq-menu h2 {
    padding: 50px 0;
    border-bottom: 1px solid black;
    margin-bottom: 0;
  }
  .faq-content {
    width: 40%;
  }
  .faq-category-label {
    font-size: 20px;
    display: flex;
    justify-content: space-between;
  }
  .faq-category {
    margin-bottom: 30px;
  }
  .faq-question {
    cursor: pointer;
    background: none;
    border: none;
    font-size: 20px;
    text-align: left;
    width: 100%;
    margin-bottom: 10px;
    padding: 10px;
  }
  .faq-answer {
    display: none;
    padding-left: 20px;
  }
  .faq-category-radio {
    width: 25px;
    height: 25px;
    accent-color: black;
    cursor: pointer;
  }
  .faq-topic h3 {
    background-color: #F7F7F4;
    border-radius: 100px;
    width: fit-content;
    padding: 0 15px;
  }
  .custom-message {
    font-size: 20px;
    margin-bottom: 55px;
    color: rgba(var(--color-foreground));
}
@media screen and (min-width: 730px) {
    .mobile-faq-title{
      display: none;
    }
}
@media screen and (max-width: 750px) {
    .faq-menu {
        display: none;
    }
    .faq-content {
        width: 80%;
        margin: auto;
    }
    .custom-message {
      margin-bottom: 100px;
    }
    .mobile-faq-title{
      font-size: 40px;
      font-weight: bold;
    }
    .faq-topic {
        padding: 35px 0;
    }
}

</style>
{% schema %}
  {
    "name": "FAQ Section",
    "settings": [
      {
        "type": "text",
        "id": "faq_title",
        "label": "FAQ Title",
        "default": "FAQs"
      },
      {
        "type": "text",
        "id": "category_title_1",
        "label": "Category Title 1",
        "default": "Category 1"
      },
      {
        "type": "text",
        "id": "category_title_2",
        "label": "Category Title 2",
        "default": "Category 2"
      },
      {
        "type": "text",
        "id": "category_title_3",
        "label": "Category Title 3",
        "default": "Category 3"
      }, {
        "type": "text",
        "id": "category_title_4",
        "label": "Category Title 4",
        "default": "Category 4"
      }, {
        "type": "text",
        "id": "category_title_5",
        "label": "Category Title 5",
        "default": "Category 5"
      }, {
        "type": "text",
        "id": "custom_message",
        "label": "Custom Message",
        "default": "Don’t see what you are looking for? Contact Info@pludolabs.com"
      }

    ],
    "blocks": [
      {
        "type": "question",
        "name": "FAQ Question",
        "settings": [
          {
            "type": "text",
            "id": "question_title",
            "label": "Question Title",
            "default": "What's in Pludo?"
          }, {
            "type": "image_picker",
            "id": "question_image",
            "label": "Question Image"
          }, {
            "type": "textarea",
            "id": "answer",
            "label": "Answer",
            "default": "Pludo contains..."
          }, {
            "type": "radio",
            "id": "category_association",
            "label": "Select FAQ Category",
            "options": [
              {
                "value": "category_1",
                "label": "Category 1"
              },
              {
                "value": "category_2",
                "label": "Category 2"
              },
              {
                "value": "category_3",
                "label": "Category 3"
              },
              {
                "value": "category_4",
                "label": "Category 4"
              }, {
                "value": "category_5",
                "label": "Category 5"
              }
            ],
            "default": "category_1"
          }
        ]
      }
    ],
    "presets": [
      {
        "name": "FAQ Template",
        "category": "Custom Pages"
      }
    ]
  }
{% endschema %}